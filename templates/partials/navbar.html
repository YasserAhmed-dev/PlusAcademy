<nav class="navbar navbar-expand-lg navbar-dark bg-primary shadow-sm sticky-top">
    <div class="container">
        <!-- Ø§Ù„Ø´Ø¹Ø§Ø± -->
        <a class="navbar-brand fw-bold d-flex align-items-center" href="{% url 'home' %}">
            <img src="https://cdn-icons-png.flaticon.com/512/3135/3135755.png" alt="Logo" width="40" class="me-2 rounded-circle bg-light p-1">
            Plus Academy
        </a>

        <!-- Ø²Ø± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© ÙÙŠ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ -->
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>

        <!-- Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© -->
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto align-items-center">
                {% if user.is_authenticated %}
                    <!-- Ù„Ùˆ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„ -->
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'profile' %}">ğŸ‘¤ Ù…Ù„ÙÙŠ</a>
                    </li>
                {% else %}
                    <!-- Ù„Ùˆ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø´ Ù…Ø³Ø¬Ù„ -->
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'login' %}">ğŸ”‘ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'create_user' %}">ğŸ“ Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</a>
                    </li>
                {% endif %}
                <li class="nav-item"><a class="nav-link {% if request.resolver_match.url_name == 'home' %}active fw-bold{% endif %}" href="{% url 'home' %}">ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></li>
                <li class="nav-item"><a class="nav-link {% if request.resolver_match.url_name == 'courses' %}active fw-bold{% endif %}" href="{% url 'courses' %}">ğŸ“š Ø§Ù„ÙƒÙˆØ±Ø³Ø§Øª</a></li>
                {% if user.is_authenticated and user.is_staff %}
                    <li class="nav-item"><a class="nav-link {% if request.resolver_match.url_name == 'manage_courses_lessons' %}active fw-bold{% endif %}" href="{% url 'manage' %}">ğŸ› ï¸ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙƒÙˆØ±Ø³Ø§Øª ÙˆØ§Ù„Ø¯Ø±ÙˆØ³</a></li>
                <!-- <li class="nav-item"><a class="nav-link {% if request.resolver_match.url_name == 'add_courses' %}active fw-bold{% endif %}" href="{% url 'add_courses' %}">â• Ø¥Ø¶Ø§ÙØ© ÙƒÙˆØ±Ø³</a></li>
                <li class="nav-item"><a class="nav-link {% if request.resolver_match.url_name == 'add_lesson' %}active fw-bold{% endif %}" href="{% url 'add_lesson' %}">ğŸ¥ Ø¥Ø¶Ø§ÙØ© Ø¯Ø±Ø³</a></li> -->
                {% endif %}
                <li class="nav-item"><a class="nav-link" href="{% url 'about' %}">â„¹ï¸ Ù…Ù† Ù†Ø­Ù†</a></li>
                <li class="nav-item"><a class="nav-link" href="{% url 'contact' %}">ğŸ“© ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</a></li>
                {% if user.is_authenticated and user.is_staff %}
                    <li class="nav-item">
                        <a class="nav-link {% if request.resolver_match.url_name == 'messages_list' %}active fw-bold{% endif %}" href="{% url 'messages_list' %}">ğŸ“¨ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„</a>
                    </li>
                {% endif %}
                {% if user.is_authenticated %}
                    <!-- Ù„Ùˆ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„ -->
                    <li class="nav-item">
                        <a class="nav-link text-danger" href="{% url 'logout' %}">ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</a>
                    </li>
                {% endif %}
                <!-- Ø²Ø± Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ -->
                <li class="nav-item">
                    <button id="theme-toggle" class="btn btn-outline-light ms-3">ğŸŒ™</button>
                </li>

            </ul>
        </div>
    </div>
</nav>

<style>
    .navbar-nav .nav-link {
        transition: 0.3s;
    }
    .navbar-nav .nav-link:hover {
        background: rgba(255,255,255,0.2);
        border-radius: 6px;
    }

    /* Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ */
    body.dark-mode {
        background-color: #121212;
        color: white;
    }
    body.dark-mode .navbar {
        background-color: #1f1f1f !important;
    }
    body.dark-mode a, body.dark-mode .nav-link {
        color: white !important;
    }
</style>

<script>
    const toggleBtn = document.getElementById("theme-toggle");
    const body = document.body;

    // Ù„Ùˆ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ø®ØªØ§Ø± Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ Ù‚Ø¨Ù„ ÙƒØ¯Ù‡
    if (localStorage.getItem("theme") === "dark") {
        body.classList.add("dark-mode");
        toggleBtn.textContent = "â˜€ï¸";
    }

    toggleBtn.addEventListener("click", () => {
        body.classList.toggle("dark-mode");
        if (body.classList.contains("dark-mode")) {
            localStorage.setItem("theme", "dark");
            toggleBtn.textContent = "â˜€ï¸";
        } else {
            localStorage.setItem("theme", "light");
            toggleBtn.textContent = "ğŸŒ™";
        }
    });
</script>
