{% extends "base.html" %}
{% block content %}
<div class="container my-5" style="max-width: 500px;">

  <!-- العنوان -->
  <h2 class="mb-4 text-center fw-bold">🔒 تغيير كلمة المرور</h2>

  <!-- رسائل الموقع -->
  <div id="messages-container">
      {% if messages %}
          {% for message in messages %}
              <div class="alert alert-{{ message.tags }} shadow-sm mb-2 animate__animated animate__fadeInLeft"
                   role="alert">
                  {{ message }}
              </div>
          {% endfor %}
      {% endif %}
  </div>

  <!-- الفورم -->
  <div class="card shadow-sm border-0 rounded-3">
    <div class="card-body p-4">
      <form method="post" novalidate>
        {% csrf_token %}

        <div class="mb-3">
          <label class="form-label">كلمة المرور القديمة</label>
          <input type="password" name="old_password" class="form-control" placeholder="أدخل كلمة المرور الحالية" required>
        </div>

        <div class="mb-3">
          <label class="form-label">كلمة المرور الجديدة</label>
          <input type="password" name="new_password1" class="form-control" placeholder="أدخل كلمة مرور جديدة" required>
        </div>

        <div class="mb-3">
          <label class="form-label">تأكيد كلمة المرور الجديدة</label>
          <input type="password" name="new_password2" class="form-control" placeholder="أعد إدخال كلمة المرور الجديدة" required>
        </div>

        <button type="submit" class="btn btn-primary w-100 py-2">تغيير كلمة المرور</button>
      </form>
    </div>
  </div>
</div>

<style>
/* مكان الرسائل */
#messages-container {
    position: fixed;
    top: 20px;
    left: 20px;
    z-index: 1050;
    width: 280px;
}
#messages-container .alert {
    border-radius: 10px;
    padding: 12px 16px;
    font-size: 14px;
}

/* ثيم الوضع الليلي */
body.dark-mode .card,
body.dark-mode .form-control,
body.dark-mode textarea,
body.dark-mode input {
    color: #ffffff !important;
    background-color: #2c2c2c !important;
    border-color: rgba(255,255,255,0.2) !important;
}
body.dark-mode .form-control::placeholder {
    color: #bbbbbb !important;
}
</style>

<!-- مكتبة الأنيميشن -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>

<!-- سكربت لإخفاء الرسائل -->
<script>
document.addEventListener("DOMContentLoaded", function() {
    const alerts = document.querySelectorAll("#messages-container .alert");
    alerts.forEach(alert => {
        setTimeout(() => {
            alert.classList.add("animate__fadeOutLeft"); // يبدأ يختفي
            setTimeout(() => alert.remove(), 1000); // بعد ثانية يتم مسحه نهائي
        }, 5000); // يبدأ بعد 5 ثواني
    });
});
</script>

{% endblock content %}
